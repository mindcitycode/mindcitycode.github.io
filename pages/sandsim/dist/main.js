(()=>{var t=[function(t,e,n){var o;!function(r,i,a){var c,s=256,u=a.pow(s,6),l=a.pow(2,52),d=2*l,f=255;function h(t,e,n){var o=[],f=v(y((e=1==e?{entropy:!0}:e||{}).entropy?[t,m(i)]:null==t?function(){try{var t;return c&&(t=c.randomBytes)?t=t(s):(t=new Uint8Array(s),(r.crypto||r.msCrypto).getRandomValues(t)),m(t)}catch(t){var e=r.navigator,n=e&&e.plugins;return[+new Date,r,n,r.screen,m(i)]}}():t,3),o),h=new p(o),g=function(){for(var t=h.g(6),e=u,n=0;t<l;)t=(t+n)*s,e*=s,n=h.g(1);for(;t>=d;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|h.g(4)},g.quick=function(){return h.g(4)/4294967296},g.double=g,v(m(h.S),i),(e.pass||n||function(t,e,n,o){return o&&(o.S&&x(o,h),t.state=function(){return x(h,{})}),n?(a.random=t,e):t})(g,f,"global"in e?e.global:this==a,e.state)}function p(t){var e,n=t.length,o=this,r=0,i=o.i=o.j=0,a=o.S=[];for(n||(t=[n++]);r<s;)a[r]=r++;for(r=0;r<s;r++)a[r]=a[i=f&i+t[r%n]+(e=a[r])],a[i]=e;(o.g=function(t){for(var e,n=0,r=o.i,i=o.j,a=o.S;t--;)e=a[r=f&r+1],n=n*s+a[f&(a[r]=a[i=f&i+e])+(a[i]=e)];return o.i=r,o.j=i,n})(s)}function x(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){var n,o=[],r=typeof t;if(e&&"object"==r)for(n in t)try{o.push(y(t[n],e-1))}catch(t){}return o.length?o:"string"==r?t:t+"\0"}function v(t,e){for(var n,o=t+"",r=0;r<o.length;)e[f&r]=f&(n^=19*e[f&r])+o.charCodeAt(r++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(v(a.random(),i),t.exports){t.exports=h;try{c=n(18)}catch(t){}}else void 0===(o=function(){return h}.call(e,n,e,t))||(t.exports=o)}("undefined"!=typeof self?self:this,[],Math)},(t,e,n)=>{var o=n(2),r=n(3),i=n(4),a=n(5),c=n(6),s=n(7),u=n(0);u.alea=o,u.xor128=r,u.xorwow=i,u.xorshift7=a,u.xor4096=c,u.tychei=s,t.exports=u},function(t,e,n){var o;!function(t,r,i){function a(t){var e,n=this,o=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var o=.02519603282416938*(e+=t.charCodeAt(n));o-=e=o>>>0,e=(o*=e)>>>0,e+=4294967296*(o-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=o(" "),n.s1=o(" "),n.s2=o(" "),n.s0-=o(t),n.s0<0&&(n.s0+=1),n.s1-=o(t),n.s1<0&&(n.s1+=1),n.s2-=o(t),n.s2<0&&(n.s2+=1),o=null}function c(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function s(t,e){var n=new a(t),o=e&&e.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,o&&("object"==typeof o&&c(o,n),r.state=function(){return c(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(o=function(){return s}.call(e,n,e,r))||(r.exports=o):this.alea=s}(0,t=n.nmd(t),n.amdD)},function(t,e,n){var o;!function(t,r,i){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var o=0;o<n.length+64;o++)e.x^=0|n.charCodeAt(o),e.next()}function c(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function s(t,e){var n=new a(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&("object"==typeof o&&c(o,n),r.state=function(){return c(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(o=function(){return s}.call(e,n,e,r))||(r.exports=o):this.xor128=s}(0,t=n.nmd(t),n.amdD)},function(t,e,n){var o;!function(t,r,i){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var o=0;o<n.length+64;o++)e.x^=0|n.charCodeAt(o),o==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function c(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function s(t,e){var n=new a(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&("object"==typeof o&&c(o,n),r.state=function(){return c(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(o=function(){return s}.call(e,n,e,r))||(r.exports=o):this.xorwow=s}(0,t=n.nmd(t),n.amdD)},function(t,e,n){var o;!function(t,r,i){function a(t){var e=this;e.next=function(){var t,n,o=e.x,r=e.i;return t=o[r],n=(t^=t>>>7)^t<<24,n^=(t=o[r+1&7])^t>>>10,n^=(t=o[r+3&7])^t>>>3,n^=(t=o[r+4&7])^t<<7,t=o[r+7&7],n^=(t^=t<<13)^t<<9,o[r]=n,e.i=r+1&7,n},function(t,e){var n,o=[];if(e===(0|e))o[0]=e;else for(e=""+e,n=0;n<e.length;++n)o[7&n]=o[7&n]<<15^e.charCodeAt(n)+o[n+1&7]<<13;for(;o.length<8;)o.push(0);for(n=0;n<8&&0===o[n];++n);for(8==n?o[7]=-1:o[n],t.x=o,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function c(t,e){return e.x=t.x.slice(),e.i=t.i,e}function s(t,e){null==t&&(t=+new Date);var n=new a(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&(o.x&&c(o,n),r.state=function(){return c(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(o=function(){return s}.call(e,n,e,r))||(r.exports=o):this.xorshift7=s}(0,t=n.nmd(t),n.amdD)},function(t,e,n){var o;!function(t,r,i){function a(t){var e=this;e.next=function(){var t,n,o=e.w,r=e.X,i=e.i;return e.w=o=o+1640531527|0,n=r[i+34&127],t=r[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=r[i]=n^t,e.i=i,n+(o^o>>>16)|0},function(t,e){var n,o,r,i,a,c=[],s=128;for(e===(0|e)?(o=e,e=null):(e+="\0",o=0,s=Math.max(s,e.length)),r=0,i=-32;i<s;++i)e&&(o^=e.charCodeAt((i+32)%e.length)),0===i&&(a=o),o^=o<<10,o^=o>>>15,o^=o<<4,o^=o>>>13,i>=0&&(a=a+1640531527|0,r=0==(n=c[127&i]^=o+a)?r+1:0);for(r>=128&&(c[127&(e&&e.length||0)]=-1),r=127,i=512;i>0;--i)o=c[r+34&127],n=c[r=r+1&127],o^=o<<13,n^=n<<17,o^=o>>>15,n^=n>>>12,c[r]=o^n;t.w=a,t.X=c,t.i=r}(e,t)}function c(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function s(t,e){null==t&&(t=+new Date);var n=new a(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&(o.X&&c(o,n),r.state=function(){return c(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(o=function(){return s}.call(e,n,e,r))||(r.exports=o):this.xor4096=s}(0,t=n.nmd(t),n.amdD)},function(t,e,n){var o;!function(t,r,i){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,o=e.d,r=e.a;return t=t<<25^t>>>7^n,n=n-o|0,o=o<<24^o>>>8^r,r=r-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-o|0,e.d=o<<16^n>>>16^r,e.a=r-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var o=0;o<n.length+20;o++)e.b^=0|n.charCodeAt(o),e.next()}function c(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function s(t,e){var n=new a(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&("object"==typeof o&&c(o,n),r.state=function(){return c(n,{})}),r}r&&r.exports?r.exports=s:n.amdD&&n.amdO?void 0===(o=function(){return s}.call(e,n,e,r))||(r.exports=o):this.tychei=s}(0,t=n.nmd(t),n.amdD)},t=>{"use strict";var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},a=[],c=0;c<t.length;c++){var s=t[c],u=o.base?s[0]+o.base:s[0],l=i[u]||0,d="".concat(u," ").concat(l);i[u]=l+1;var f=n(d),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)e[f].references++,e[f].updater(h);else{var p=r(h,o);o.byIndex=c,e.splice(c,0,{identifier:d,updater:p,references:1})}a.push(d)}return a}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var s=o(t,r),u=0;u<i.length;u++){var l=n(i[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=s}}},t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},t=>{"use strict";var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var o=n(15),r=n.n(o),i=n(16),a=n.n(i)()(r());a.push([t.id,"div.toolbar {\n    position: fixed;\n    display: flex;\n    padding: 2px;\n    border: 5px solid grey;\n    border-radius: 0 0px 5px 5px;\n    background-color: grey;\n    left: 50%;\n    transform: translate(-50%);\n}\n\ndiv.toolbar button {\n    border: 0px;\n    border-radius: 4px;\n    width: 30px;\n    height: 30px;\n}\n\ndiv.toolbar button.shape {\n    background-color: white;\n}\n\ndiv.toolbar #particle-count {\n    font-family: monospace;\n    height: 30px;\n    width: 10em;\n    color: white;\n}\n\ndiv.toolbar div.separator {\n    width: 20px;\n}",""]);const c=a},t=>{"use strict";t.exports=function(t){return t[1]}},t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);o&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},,()=>{}],e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.nc=void 0,(()=>{"use strict";var t=n(1),e=n.n(t);const o=(t,e,n)=>Math.max(e,Math.min(t,n));var r=n(8),i=n.n(r),a=n(9),c=n.n(a),s=n(10),u=n.n(s),l=n(11),d=n.n(l),f=n(12),h=n.n(f),p=n(13),x=n.n(p),y=n(14),v={};v.styleTagTransform=x(),v.setAttributes=d(),v.insert=u().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=h();i()(y.Z,v);y.Z&&y.Z.locals&&y.Z.locals;const m=e()("hello."),g=[{symbol:"⬤",getPoints:(t,e)=>{const n=[];for(let o=0;o<10;o++){const o=m()*Math.PI*2,r=5*m(),i=Math.floor(t+r*Math.cos(o)),a=Math.floor(e+r*Math.sin(o));n.push({x:i,y:a})}return n}},{symbol:"⏹",getPoints:(t,e)=>{const n=[];for(let o=0;o<10;o++)for(let r=0;r<10;r++){const i=t+o-5,a=e+r-5;n.push({x:i,y:a})}return n}}],b=[void 0,[227,219,101],[0,0,238],[170,170,170],[255,5,3],[133,94,66],[0,255,160],[255,255,255],[255,192,203],[15,240,255]],w=e()("hello."),C=(t,e)=>t+Math.floor((e-t)*w()),k=((t,e)=>{const n=100*t/e,o=document.createElement("style");o.textContent=`\nbody { \n    background-color : black;\n    margin:0;\n    border:0;\n    padding : 0;\n}\ncanvas.fullscreen {\n    background-color : black;\n    image-rendering: pixelated;\n    image-rendering: crisp-edges;\n    width : min(100vw,${n}vh);\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);    \n}\n`,document.head.appendChild(o);const r=document.createElement("canvas");return r.width=t,r.height=e,r.classList.add("fullscreen"),document.body.appendChild(r),r})(200,200),T=k.getContext("2d"),M=T.getImageData(0,0,k.width,k.height),E=(t,e,n,o,r,i)=>{const a=4*(t+k.width*e);M.data[a]=n,M.data[a+1]=o,M.data[a+2]=r,M.data[a+3]=i},D=(t,e)=>t>0&&t<k.width&&e>0&&e<k.height,S=new Array(k.width*k.height),A=(t,e)=>S[t+k.width*e],j=(t,e,n)=>S[t+k.width*e]=n;class O{constructor(t,e,n,r,i,a=-1){Object.assign(this,{type:t,x:e,y:n,dx:r,dy:i,ttl:a}),this.col=[...b[this.type]],this.col[0]=o(this.col[0]+C(-20,20),0,255),this.col[1]=o(this.col[1]+C(-20,20),0,255),this.col[2]=o(this.col[2]+C(-20,20),0,255)}getColor(){return this.col}moveTo(t,e){E(this.x,this.y,0,0,0,255),((t,e,n)=>{j(n.x,n.y,void 0),j(t,e,n)})(t,e,this),this.x=t,this.y=e,E(this.x,this.y,...this.getColor(),255)}kill(){E(this.x,this.y,0,0,0,255),j(this.x,this.y,void 0),this.type=0}age(){this.ttl>0&&(this.ttl--,0===this.ttl&&this.kill())}reduceTtl(t){const e=Math.max(1,t);-1===this.ttl?this.ttl=e:this.ttl=Math.min(this.ttl,e)}swapWith(t){const e=t.x,n=t.y;t.x=this.x,t.y=this.y,this.x=e,this.y=n,j(this.x,this.y,this),j(t.x,t.y,t),E(this.x,this.y,...this.getColor(),255),E(t.x,t.y,...t.getColor(),255)}}const I=[];for(let t=0;t<0;t++){const t=new O(C(1,3),C(0,k.width),C(0,k.height));void 0===A(t.x,t.y)&&(j(t.x,t.y,t),I.push(t),t.moveTo(t.x,t.y))}const P=((t,e)=>{const n={x:0,y:0,clicked:!1,type:1,shape:0};document.body.addEventListener("mousemove",(t=>((t,e,n={x:void 0,y:void 0})=>{var o=t.getBoundingClientRect(),r=t.width/o.width,i=t.height/o.height;n.x=(e.clientX-o.left)*r,n.y=(e.clientY-o.top)*i})(e,t,n))),document.body.addEventListener("mousedown",(t=>n.clicked=!0)),document.body.addEventListener("mouseup",(t=>n.clicked=!1));const o=()=>{const t=document.createElement("div");return t.classList.add("separator"),t},r=document.createElement("div");r.classList.add("toolbar"),document.body.append(r);const i=((t=16,e=64)=>{const n=document.createElement("canvas");n.width=100,n.height=30;const o=n.getContext("2d"),r=t=>t/e*n.width;return{update:i=>{o.fillStyle="rgba(0,255,0,0.025)",o.fillRect(0,0,r(t),n.height),o.fillStyle="rgba(255,0,0,0.025)",o.fillRect(r(t),0,n.width,n.height);const a=i/e*n.width;o.fillStyle="black",o.fillRect(a,0,1,n.height)},canvas:n}})();r.append(i.canvas),i.update(),r.append(o()),g.forEach(((t,e)=>{const o=document.createElement("button");o.classList.add("shape"),o.textContent=t.symbol,o.onclick=()=>n.shape=e,r.append(o)})),r.append(o()),t.forEach(((t,e)=>{if(t){const o=document.createElement("button"),[i,a,c]=t;o.textContent=".",o.style["background-color"]=`rgb(${i},${a},${c})`,o.onclick=()=>n.type=e,r.append(o)}})),r.append(o());{const t=document.createElement("span");t.id="particle-count",t.setCount=e=>t.textContent=`${e} particles`,t.setCount(0),r.append(t)}return{frameTimer:i,pointer:n,setParticleCount:t=>document.getElementById("particle-count").setCount(t)}})(b,k);(t=>{const e=()=>{const o=performance.now();t((o-n)/1e3,o/1e3),n=o,requestAnimationFrame(e)};let n=performance.now();requestAnimationFrame(e)})(((t,e)=>{const n=performance.now();if(P.pointer.clicked){const t=P.pointer,e=g[t.shape].getPoints(t.x,t.y);for(let n=0;n<e.length;n++){const o=3===t.type?C(30,90):4===t.type?C(100,260):void 0,r=(w(),Math.PI,w(),e[n].x),i=e[n].y,a=9===t.type?2*w()-1:0,c=9===t.type?2*w()-1:0;if(D(r,i)){const e=new O(t.type,Math.floor(r),Math.floor(i),a,c,o);void 0===A(e.x,e.y)&&(I.push(e),e.moveTo(e.x,e.y))}}}for(let t=0;t<I.length;t++){const e=I[t];if(e.age(),1===e.type){const t=[[e.x,e.y+1],[e.x-1,e.y+1],[e.x+1,e.y+1]];let n=!1;for(let n=0;n<t.length;n++){const[o,r]=t[n];if(D(o,r)&&void 0===A(o,r)){e.moveTo(o,r);break}}if(!n&&D(e.x,e.y+1)){const t=A(e.x,e.y+1);t&&2===t.type&&w()>.8&&e.swapWith(t)}}else if(2===e.type){const t=[[e.x,e.y+1],[e.x-1,e.y+1],[e.x+1,e.y+1],[e.x-1,e.y],[e.x+1,e.y]];for(let n=0;n<t.length;n++){const[o,r]=t[n];if(D(o,r)){if(void 0===A(o,r)){e.moveTo(o,r);break}}}}if(3===e.type){const t=[[e.x,e.y-1],[e.x-1,e.y-1],[e.x+1,e.y-1]];if(w()>.5)for(let n=0;n<t.length;n++){const[o,r]=t[n];if(D(o,r)&&void 0===A(o,r)){e.moveTo(o,r);break}}}if(4===e.type){const t=[[e.x,e.y+1],[e.x-1,e.y+1],[e.x+1,e.y+1]];for(let n=0;n<t.length;n++){const[o,r]=t[n];if(D(o,r)){const t=A(o,r);if(void 0===t){e.moveTo(o,r);break}5===t.type&&w()>.99&&(t.type=4,t.col=[...e.col],t.reduceTtl(C(60,120)))}}{const t=e.x,n=e.y-1;if(w()>.95&&D(t,n)&&void 0===A(t,n)){const e=new O(3,t,n,0,0,C(30,60));j(e.x,e.y,e),I.push(e)}}}else if(6===e.type){{const t=[[e.x,e.y+1],[e.x,e.y-1]];for(let n=0;n<t.length;n++){const[o,r]=t[n];if(D(o,r)){const t=A(o,r);if(t&&6!==t.type){t.reduceTtl(C(10,30)),e.reduceTtl(C(20,50));break}}}}const t=[[e.x,e.y+1],[e.x-1,e.y+1],[e.x+1,e.y+1],[e.x-1,e.y],[e.x+1,e.y]];for(let n=0;n<t.length;n++){const[o,r]=t[n];if(D(o,r)&&void 0===A(o,r)){e.moveTo(o,r);break}}}else if(7===e.type){const t=[[e.x,e.y+1],[e.x-1,e.y+1],[e.x+1,e.y+1]];for(let n=0;n<t.length;n++){const[o,r]=t[n];if(D(o,r)){const t=A(o,r);if(void 0===t){e.moveTo(o,r);break}2===t.type&&e.reduceTtl(C(20,50))}}}else if(8===e.type){const t=e.x+(w()>.5?1:-1),n=e.y+(w()>.75?1:-1);D(t,n)&&void 0===A(t,n)&&e.moveTo(t,n)}else if(9===e.type){e.dy+=.1;const t=Math.round(e.x+e.dx),n=Math.round(e.y+e.dy);if(D(t,n)){const o=A(t,n);void 0===o?e.moveTo(t,n):9!==o.type&&(e.type=2)}else e.type=2}if(0===e.ttl){const e=I[I.length-1];I[t]=e,I.length--,t--}}T.putImageData(M,0,0);const o=performance.now();P.frameTimer.update(o-n),P.setParticleCount(I.length)}))})()})();