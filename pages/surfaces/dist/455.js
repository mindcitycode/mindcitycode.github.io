(()=>{"use strict";var t,e,s={9:(t,e,s)=>{var n=s(11),r=s(15);const a=t=>{const{cells:e,positions:s}=t,n=[];for(let t=0;t<e.length;t++){const r=e[t];for(let t=0;t<3;t++){const e=s[r[t]];n.push(...e)}}return new Float32Array(n)},o=t=>{const e=(t=>{const e=new r.u9r;return e.setAttribute("position",new r.TlE(t,3)),e.computeVertexNormals(),e})(t);return{position:e.attributes.position.array,normal:e.attributes.normal.array}};class i{constructor(t,e=0,s=0,n=0){Object.assign(this,{center:new r.Pa4(e,s,n),radius:t,squaredRadius:t*t})}sdf(t){return this.center.distanceTo(t)-this.radius}}class c{static q=new r.Pa4;static q1=new r.Pa4;static v000=new r.Pa4(0,0,0);constructor(t,e,s){Object.assign(this,{b:new r.Pa4(t,e,s)})}sdf(t){c.q;c.q.set(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z)).sub(this.b);return c.q1.copy(c.q).max(c.v000).length()+Math.min(Math.max(c.q.x,Math.max(c.q.y,c.q.z)),0)}}class h{pxz=new r.FM8;q=new r.FM8;constructor(t,e){Object.assign(this,{tx:t,ty:e})}sdf(t){return this.q.set(this.pxz.set(t.x,t.z).length()-this.tx,t.y),this.q.length()-this.ty}}class p{cxy=new r.FM8;pxz=new r.FM8;constructor(t,e=0,s=0){this.radius=t,this.cxy.set(e,s)}sdf(t){return this.pxz.set(t.x,t.z).sub(this.cxy).length()-this.radius}}class u{constructor(...t){Object.assign(this,{shapes:t})}sdf(t){return Math.min.apply(Math,this.shapes.map((e=>e.sdf(t))))}}class l{constructor(t,e){Object.assign(this,{shape0:t,shape1:e})}sdf(t){return Math.max(-1*this.shape0.sdf(t),this.shape1.sdf(t))}}class w{position=new r.Pa4;#t=new r._fP;rotation=new r.USm;scale=new r.Pa4(1,1,1);m4=new r.yGw;#e=new r.Pa4;constructor(t){Object.assign(this,{shape:t})}updateMatrix(){this.#t.setFromEuler(this.rotation),this.m4.compose(this.position,this.#t,this.scale),this.m4.invert()}set(t){return t(this),this.updateMatrix(),this}apply(t){return this.#e.copy(t),this.#e.applyMatrix4(this.m4),this.#e}sdf(t){return this.shape.sdf(this.apply(t))}}const f=t=>console.log("%c[surface-worker]%c "+t,"color:orange;background-color:black;","color:black");new class{constructor(...t){Object.assign(this,{shapes:t})}sdf(t){return Math.max.apply(Math,this.shapes.map((e=>e.sdf(t))))}}(new i(5),new class{#s=new Map;constructor(t){Object.assign(this,{shape:t})}sdf(t){const e=[t.x,t.y,t.z].join("_"),s=this.#s.get(e);if(void 0!==s)return s;{const s=this.shape.sdf(t);return this.#s.set(e,s),s}}}({sdf:()=>Math.random()-.5})),new u(new l(new u(new c(10,3,3),new c(3,10,3),new c(3,3,10)),new l(new i(8),new i(10))),new i(4));onmessage=function(t){f("computing surface net and normals....");const e=performance.now(),s=new w(new u(new l(new w(new c(3,3,3)).set((({position:t})=>t.set(3,3,3))),new u(new l(new p(2),new l(new i(5),new i(6))),new h(6,2))),new l(new c(2,4,2),new l(new i(3),new i(4))))).set((({rotation:t})=>t.set(Math.PI/6,Math.PI/8,-Math.PI/8))),d=t.data.density||1,m=[[-11,-11,-11],[11,11,11]],g=[(m[1][0]-m[0][0])*d,(m[1][1]-m[0][1])*d,(m[1][2]-m[0][2])*d],x=new r.Pa4;var y=(0,n.surfaceNets)(g,((t,e,n)=>(x.set(t,e,n),s.sdf(x))),m);const b=a(y),v=o(b);f("computing  normals....");{const t=(t=>{const e=new r.Pa4,s=new r.Pa4,n=new r.Pa4,a=new r.Pa4,o=new r.Pa4,i=new r.Pa4,c=new r.Pa4;return(r,h=e)=>{const p=1e-4;return s.set(r.x+p,r.y,r.z),n.set(r.x-p,r.y,r.z),a.set(r.x,r.y+p,r.z),o.set(r.x,r.y-p,r.z),i.set(r.x,r.y,r.z+p),c.set(r.x,r.y,r.z-p),h.set(t(s)-t(n),t(a)-t(o),t(i)-t(c)).normalize()}})(s.sdf.bind(s));for(let e=0;e<v.position.length;e+=3){x.set(v.position[e],v.position[e+1],v.position[e+2]);const s=t(x);v.normal[e]=s.x,v.normal[e+1]=s.y,v.normal[e+2]=s.z}}console.log(v),f(`done, took ${this.performance.now()-e}ms ,  ${(this.performance.now()-e)/1e3}s`),postMessage(v)}}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;var a=n[t]={exports:{}};return s[t](a,a.exports,r),a.exports}r.m=s,r.x=()=>{var t=r.O(void 0,[117],(()=>r(9)));return t=r.O(t)},t=[],r.O=(e,s,n,a)=>{if(!s){var o=1/0;for(p=0;p<t.length;p++){for(var[s,n,a]=t[p],i=!0,c=0;c<s.length;c++)(!1&a||o>=a)&&Object.keys(r.O).every((t=>r.O[t](s[c])))?s.splice(c--,1):(i=!1,a<o&&(o=a));if(i){t.splice(p--,1);var h=n();void 0!==h&&(e=h)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[s,n,a]},r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,s)=>(r.f[s](t,e),e)),[])),r.u=t=>t+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={455:1};r.f.i=(e,s)=>{t[e]||importScripts(r.p+r.u(e))};var e=self.webpackChunksurfaces=self.webpackChunksurfaces||[],s=e.push.bind(e);e.push=e=>{var[n,a,o]=e;for(var i in a)r.o(a,i)&&(r.m[i]=a[i]);for(o&&o(r);n.length;)t[n.pop()]=1;s(e)}})(),e=r.x,r.x=()=>r.e(117).then(e);r.x()})();