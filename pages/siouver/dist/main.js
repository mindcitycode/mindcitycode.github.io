(()=>{const t=t=>document.createElement(t),e=t("style");document.head.append(e),e.textContent="\nbody {\n    width : 1000000px;\n    height : 1000000px;\n}\ndiv {  position : fixed }\nbutton.validate { visibility: hidden;}\nbutton.cancel { visibility: hidden;}\ninput { visibility: hidden;}\n\nbody.where { cursor: crosshair;}\nbody.where div button.add { visibility: hidden; }\n\nbody.what div button.add { visibility: hidden; }\nbody.what div input {  visibility: visible ; autofocus : true }\nbody.what div button.validate {  visibility: visible }\nbody.what div button.cancel {  visibility: visible }\nspan.location {\n    position : fixed;\n    right : 1em;\n}\np.box { position:absolute;}\n/**/\nbody {\n    background-color : black;\n    color : white;\n    font-family : verdana;\n}\ndiv { \n    position : fixed ;\n    border-bottom : 2px solid #888;\n    margin:0;\n    padding:0.5em;\n    top:0;\n    left:0;\n    width:100vw;\n    background-color:#555;\n    z-index:999       \n}\n";let n={x:0,y:0};document.body.addEventListener("pointermove",(t=>{n.x=t.layerX,n.y=t.layerY}));const o=(e,n,o,i)=>{const d=t("p");d.classList.add("box"),d.style.left=`${n}px`,d.style.top=`${o}px`,d.textContent=i,document.body.append(d)},i=(()=>{let t,e,i;return{message:d=>a=>{(d=>{if(void 0===t)"add"===d&&(t="where",document.body.classList.add("where"));else if("where"===t){const o=document.getElementById("content");document.getElementsByTagName("div")[0],"there"===d&&(t="what",document.body.classList.remove("where"),document.body.classList.add("what"),e=n.x,i=n.y,o.focus(),o.click())}else if("what"===t){const n=document.getElementById("content"),a=(document.getElementsByTagName("div")[0],document.getElementsByClassName("add")[0]);if("cancel"==d)t=void 0,document.body.classList.remove("what"),n.value="",a.focus();else if("validate"===d){t=void 0,document.body.classList.remove("what");const d=n.value;n.value="",(async(t,e,n)=>{const o=await fetch("/bloc",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify([t,e,n])});return await o.json()})(e,i,d).then((([t,e,n,i])=>{o(0,e,n,i)})),a.focus()}}})(d),a?.stopPropagation()}}})();{const e=t("div");document.body.append(e);{const n=t("button");n.textContent="add",n.onclick=i.message("add"),n.classList.add("add"),e.append(n)}document.body.onclick=i.message("there");{const n=t("input");n.placeholder="type your text",n.id="content",e.append(n)}{const n=t("button");n.textContent="ok",n.onclick=i.message("validate"),n.classList.add("validate"),e.append(n)}{const n=t("button");n.textContent="cancel",n.onclick=i.message("cancel"),n.classList.add("cancel"),e.append(n)}{const n=t("span");n.classList="location",n.textContent="22",e.append(n)}}setInterval((()=>{new URL(document.location);let t=new URLSearchParams;t.set("x",n.x),t.set("y",n.y),history.replaceState("no","no","?"+t.toString()),document.getElementsByClassName("location")[0].textContent=`${n.x} ${n.y}`}),100),(async()=>{(await fetch("/blocs").then((t=>t.json()))).forEach((([t,e,n,i])=>{o(0,e,n,i)}))})()})();